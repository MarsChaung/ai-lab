<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>巴菲特AI價值投資-美股市場週報 (2025/11/17~11/22)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* 自定義樣式補充 */
        .active-nav-link {
            color: #0ea5e9; /* sky-500 */
            border-bottom-width: 2px;
            border-color: #0ea5e9;
        }
        .inactive-nav-link {
            color: #4b5563; /* gray-600 */
            border-bottom-width: 2px;
            border-color: transparent;
        }
        .inactive-nav-link:hover {
            color: #1f2937; /* gray-800 */
        }
        /* 表格響應式優化 */
        .table-container {
            overflow-x: auto;
        }
    </style>
</head>
<body class="bg-stone-50 font-sans text-stone-700">

    <!-- 1. 導航互動 (Sticky Header) -->
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-sm shadow-md transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-sky-700">美股市場週報</span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center" id="desktop-menu">
                    <a href="#macro" class="nav-link inactive-nav-link px-1 pt-1 text-sm font-medium transition-colors">宏觀經濟</a>
                    <a href="#tech" class="nav-link inactive-nav-link px-1 pt-1 text-sm font-medium transition-colors">科技板塊</a>
                    <a href="#retail" class="nav-link inactive-nav-link px-1 pt-1 text-sm font-medium transition-colors">零售雙城記</a>
                    <a href="#data-table" class="nav-link inactive-nav-link px-1 pt-1 text-sm font-medium transition-colors">數據透視</a>
                    <a href="#strategy" class="nav-link inactive-nav-link px-1 pt-1 text-sm font-medium transition-colors">投資策略</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="flex items-center md:hidden">
                    <button id="mobile-menu-btn" class="text-stone-600 hover:text-sky-600 focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu (Hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="#macro" class="block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:text-sky-600 hover:bg-stone-50">宏觀經濟</a>
                <a href="#tech" class="block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:text-sky-600 hover:bg-stone-50">科技板塊</a>
                <a href="#retail" class="block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:text-sky-600 hover:bg-stone-50">零售雙城記</a>
                <a href="#data-table" class="block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:text-sky-600 hover:bg-stone-50">數據透視</a>
                <a href="#strategy" class="block px-3 py-2 rounded-md text-base font-medium text-stone-700 hover:text-sky-600 hover:bg-stone-50">投資策略</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-16">

        <!-- Header Section -->
        <header class="text-center py-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-stone-800 mb-4">迷霧中的燈塔</h1>
            <p class="text-xl text-stone-600">AI 的韌性、零售的雙城記與後停擺時代的宏觀信號</p>
            <p class="mt-2 text-sm text-stone-400">資料期間：2025/11/17~11/22</p>
            <a href="https://podcasts.apple.com/tw/podcast/%E5%B7%B4%E8%8F%B2%E7%89%B9ai%E5%AF%A6%E9%A9%97%E5%AE%A4/id1812818724?i=1000738046483" target="_blank" class="inline-block mt-4 px-6 py-3 text-sm font-semibold text-white bg-sky-600 rounded-lg hover:bg-sky-700">聆聽本集Podcast</a>
        </header>

        <!-- 2. 宏觀經濟環境 -->
        <section id="macro" class="scroll-mt-24">
            <h2 class="text-3xl font-bold text-stone-800 mb-6 border-b-2 border-sky-500 pb-2">宏觀經濟：數據真空與決策</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Card 1 -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6 hover:shadow-xl transition-shadow">
                    <h3 class="text-xl font-bold text-red-600 mb-3">⚠️ 歷史性停擺後遺症</h3>
                    <p class="text-stone-600 mb-4">
                        2025年10月長達 43 天的政府停擺導致關鍵經濟數據（CPI, 就業報告）缺失。聯準會被迫依賴私營部門的「替代數據」進行決策，增加了樣本偏差風險。
                    </p>
                    <div class="bg-red-50 p-3 rounded border-l-4 border-red-500">
                        <span class="font-bold">現狀：</span> 市場在數據迷霧中航行，8月貿易逆差數據雖補發但時效性已過。
                    </div>
                </div>
                <!-- Card 2 -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6 hover:shadow-xl transition-shadow">
                    <h3 class="text-xl font-bold text-sky-600 mb-3">🦅 聯準會鷹鴿之爭</h3>
                    <ul class="list-disc pl-5 space-y-2 text-stone-600">
                        <li><strong>John Williams (鴿派轉向)：</strong> 支持近期降息，12月降息預期從 40% 飆升至 70%。</li>
                        <li><strong>Philip Jefferson (金融穩定)：</strong> 明確表示 AI 熱潮與 .com 泡沫不同，AI 巨頭擁有真實現金流與低槓桿，為科技股估值背書。</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 3. 科技板塊 (含 Chart.js) -->
        <section id="tech" class="scroll-mt-24">
            <h2 class="text-3xl font-bold text-stone-800 mb-6 border-b-2 border-sky-500 pb-2">科技板塊：Nvidia 與 AI 超級週期</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Nvidia Info -->
                <div class="lg:col-span-1 bg-white rounded-lg shadow-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg">N</div>
                        <h3 class="ml-3 text-2xl font-bold text-stone-800">Nvidia 財報亮點</h3>
                    </div>
                    <div class="space-y-4">
                        <div class="border-b border-gray-200 pb-2">
                            <p class="text-sm text-stone-500">總營收</p>
                            <p class="text-2xl font-bold text-green-600">$570.1 億 <span class="text-sm text-green-500">(+62.5%)</span></p>
                        </div>
                        <div class="border-b border-gray-200 pb-2">
                            <p class="text-sm text-stone-500">資料中心營收</p>
                            <p class="text-xl font-bold text-stone-800">$512.0 億</p>
                        </div>
                        <div>
                            <p class="text-sm text-stone-500">未來展望</p>
                            <p class="text-stone-700 mt-1">從「生成式 AI」轉向「代理型 AI」。Blackwell 需求 "Off the charts"（爆表），供應瓶頸是唯一限制。</p>
                        </div>
                    </div>
                </div>

                <!-- 4. 動態圖表區塊 (Interactive Chart) -->
                <div class="lg:col-span-2 bg-white rounded-lg shadow-lg p-6 mb-6">
                    <h3 class="text-lg font-bold text-stone-700 mb-4">重點企業營收年增率 (YoY) 比較</h3>
                    <div class="relative w-full h-72">
                        <canvas id="revenueChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-stone-400 mt-2">資料來源：2025年11月財報數據</p>
                </div>
            </div>
        </section>

        <!-- 4. 零售板塊 -->
        <section id="retail" class="scroll-mt-24">
            <h2 class="text-3xl font-bold text-stone-800 mb-6 border-b-2 border-sky-500 pb-2">零售雙城記：K型復甦</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Walmart -->
                <div class="bg-blue-50 rounded-lg shadow-lg p-6 mb-6 border-t-4 border-blue-600">
                    <h3 class="text-2xl font-bold text-blue-800 mb-2">Walmart (贏家)</h3>
                    <p class="text-sm font-semibold text-blue-600 mb-4">股價大漲創新高</p>
                    <ul class="space-y-2 text-stone-700 text-sm">
                        <li>✅ <strong>營收增長：</strong> +5.8%</li>
                        <li>✅ <strong>關鍵策略：</strong> 吸引年收10萬美元以上的「高收入難民」。</li>
                        <li>✅ <strong>電商爆發：</strong> 成長 27%，縮小與 Amazon 差距。</li>
                    </ul>
                </div>

                <!-- Target -->
                <div class="bg-red-50 rounded-lg shadow-lg p-6 mb-6 border-t-4 border-red-600">
                    <h3 class="text-2xl font-bold text-red-800 mb-2">Target (輸家)</h3>
                    <p class="text-sm font-semibold text-red-600 mb-4">股價暴跌 ~16%</p>
                    <ul class="space-y-2 text-stone-700 text-sm">
                        <li>❌ <strong>營收衰退：</strong> -1.5%</li>
                        <li>❌ <strong>致命傷：</strong> 非必需品 (家居/服裝) 佔比過高，受通膨擠壓最重。</li>
                        <li>❌ <strong>供應鏈：</strong> 庫存積壓導致大幅打折促銷。</li>
                    </ul>
                </div>

                <!-- Home Depot -->
                <div class="bg-orange-50 rounded-lg shadow-lg p-6 mb-6 border-t-4 border-orange-500">
                    <h3 class="text-2xl font-bold text-orange-800 mb-2">Home Depot</h3>
                    <p class="text-sm font-semibold text-orange-600 mb-4">房市冰河期受害者</p>
                    <ul class="space-y-2 text-stone-700 text-sm">
                        <li>⚠️ <strong>同店銷售：</strong> 僅微增 0.2% (依賴收購)。</li>
                        <li>⚠️ <strong>宏觀因素：</strong> 高利率導致「鎖定效應」，房產周轉率創40年新低。</li>
                        <li>⚠️ <strong>天氣因素：</strong> 缺乏極端天氣導致維修需求下降。</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 3. 互動資料表格 -->
        <section id="data-table" class="scroll-mt-24">
            <h2 class="text-3xl font-bold text-stone-800 mb-6 border-b-2 border-sky-500 pb-2">Nvidia 財報數據透視</h2>
            
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <div class="flex flex-col md:flex-row justify-between items-center mb-4 space-y-3 md:space-y-0">
                    <h3 class="text-lg font-bold text-stone-700">2026財年 Q3 核心數據矩陣</h3>
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="搜尋指標 (例: 營收, EPS)..." 
                               class="pl-10 pr-4 py-2 border border-stone-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 w-64">
                        <span class="absolute left-3 top-2.5 text-stone-400">🔍</span>
                    </div>
                </div>

                <div class="table-container max-h-96 overflow-y-auto border border-stone-200 rounded-lg">
                    <table class="min-w-full divide-y divide-stone-200">
                        <thead class="bg-stone-100 sticky top-0">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">財務指標</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">實際值 (Q3)</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">年增率 (YoY)</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-stone-500 uppercase tracking-wider">分析評價</th>
                            </tr>
                        </thead>
                        <tbody id="financialTableBody" class="bg-white divide-y divide-stone-200">
                            <!-- JS將在此插入數據 -->
                        </tbody>
                    </table>
                </div>
                <p class="text-sm text-stone-500 mt-2">* 支援即時搜尋篩選</p>
            </div>
        </section>

        <!-- 投資策略 -->
        <section id="strategy" class="scroll-mt-24 mb-12">
            <h2 class="text-3xl font-bold text-stone-800 mb-6 border-b-2 border-sky-500 pb-2">本週投資策略總結</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-stone-800 to-stone-700 text-white rounded-lg p-6 shadow-lg">
                    <div class="text-2xl font-bold mb-2">01</div>
                    <h3 class="text-xl font-bold text-green-400 mb-3">擁抱 AI 基礎設施</h3>
                    <p class="text-stone-300 text-sm">忽視短期噪音。Nvidia 與 Jefferson 的講話確認 AI 建設週期未結束。逢低買入「賣鏟人」(Nvidia, TSMC)。</p>
                </div>
                <div class="bg-gradient-to-br from-stone-800 to-stone-700 text-white rounded-lg p-6 shadow-lg">
                    <div class="text-2xl font-bold mb-2">02</div>
                    <h3 class="text-xl font-bold text-blue-400 mb-3">零售「去弱留強」</h3>
                    <p class="text-stone-300 text-sm">K型消費是主旋律。做多具供應鏈議價能力與性價比的 Walmart、Costco。迴避依賴中產非必需品的 Target。</p>
                </div>
                <div class="bg-gradient-to-br from-stone-800 to-stone-700 text-white rounded-lg p-6 shadow-lg">
                    <div class="text-2xl font-bold mb-2">03</div>
                    <h3 class="text-xl font-bold text-yellow-400 mb-3">利用數據真空期</h3>
                    <p class="text-stone-300 text-sm">本週數據密集且感恩節流動性低，易有劇烈波動。保留現金 (Dry Powder)，若恐慌性拋售出現可視為買點。</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-800 text-stone-400 mt-12 py-8">
        <div class="container mx-auto px-4 text-center text-sm">
            <p>&copy; 巴菲特AI價值投資-美股市場週報 (2025/11/17~11/22)。僅供參考，不構成投資建議。</p>
            <p class="text-xs mt-1">資料來源：基於網路相關公開資料 (2025年11月23日)。</p>
        </div>
    </footer>

    <!-- JavaScript 邏輯 -->
    <script>
        // --- 1. 資料準備 (Data Source) ---
        // 來源：報告中 Nvidia 3.1 節表格
        const productData = [
            { metric: "總營收 (Revenue)", value: "$570.1 億", yoy: "+62.5%", analysis: "顯著超預期，顯示需求未見頂" },
            { metric: "資料中心營收", value: "$512.0 億", yoy: "--", analysis: "AI 基礎設施建設仍在加速" },
            { metric: "每股盈餘 (Non-GAAP EPS)", value: "$1.30", yoy: "+60.5%", analysis: "盈利能力持續爆發" },
            { metric: "毛利率 (GAAP)", value: "73.4%", yoy: "-120 bps", analysis: "因 Blackwell 初期爬坡成本略降 (主要擔憂點)" },
            { metric: "Q4 營收指引", value: "$650.0 億", yoy: "--", analysis: "指引高於預期，成長確定性高" }
        ];

        // --- 2. 互動式表格 (Interactive Table) ---
        const tableBody = document.getElementById('financialTableBody');
        const searchInput = document.getElementById('searchInput');

        function renderTable(data) {
            tableBody.innerHTML = '';
            if(data.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="4" class="px-6 py-4 text-center text-stone-500">查無資料</td></tr>';
                return;
            }
            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'hover:bg-stone-50 transition-colors';
                tr.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-900">${row.metric}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-600">${row.value}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-600 font-bold ${row.yoy.includes('+') ? 'text-green-600' : (row.yoy.includes('-') && !row.yoy.includes('--') ? 'text-red-600' : 'text-stone-600')}">${row.yoy}</td>
                    <td class="px-6 py-4 text-sm text-stone-600">${row.analysis}</td>
                `;
                tableBody.appendChild(tr);
            });
        }

        // 初始化表格
        renderTable(productData);

        // 搜尋篩選監聽
        searchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = productData.filter(item => 
                item.metric.toLowerCase().includes(term) || 
                item.analysis.toLowerCase().includes(term)
            );
            renderTable(filtered);
        });

        // --- 3. Chart.js 動態圖表 ---
        // 數據來源：報告中提及的營收年增率 (Nvidia: +62.5%, Walmart: +5.8%, HD: +2.8%, Target: -1.5%)
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Nvidia (NVDA)', 'Walmart (WMT)', 'Home Depot (HD)', 'Target (TGT)'],
                    datasets: [{
                        label: '季度營收年增率 (YoY %)',
                        data: [62.5, 5.8, 2.8, -1.5],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.7)',  // Green for NVDA
                            'rgba(59, 130, 246, 0.7)', // Blue for WMT
                            'rgba(249, 115, 22, 0.7)', // Orange for HD
                            'rgba(239, 68, 68, 0.7)'   // Red for TGT
                        ],
                        borderColor: [
                            'rgb(34, 197, 94)',
                            'rgb(59, 130, 246)',
                            'rgb(249, 115, 22)',
                            'rgb(239, 68, 68)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: '#e5e7eb' },
                            title: { display: true, text: '百分比 (%)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        });

        // --- 4. 導航互動 (Mobile Menu & Scroll Spy) ---
        
        // Mobile Menu Toggle
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');

        btn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
        });

        // Scroll Spy (Active Link State)
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');

        const observerOptions = {
            root: null,
            rootMargin: '-50% 0px -50% 0px', // 視窗中間觸發
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    
                    // 移除所有 active 樣式
                    navLinks.forEach(link => {
                        link.classList.remove('active-nav-link');
                        link.classList.add('inactive-nav-link');
                    });

                    // 為當前區塊對應的連結添加 active 樣式
                    const activeLink = document.querySelector(`.nav-link[href="#${id}"]`);
                    if (activeLink) {
                        activeLink.classList.remove('inactive-nav-link');
                        activeLink.classList.add('active-nav-link');
                    }
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });

    </script>
</body>
</html>